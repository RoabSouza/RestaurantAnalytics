<div class="insights-panel">
    <div class="insights-header">
      <h3>ğŸ“Š AnÃ¡lise Comparativa</h3>
      <button *ngIf="carregando" class="btn-loading" disabled>
        â³ Analisando...
      </button>
    </div>
  
    <div *ngIf="carregando" class="loading-insights">
      <div class="spinner"></div>
      <p>Comparando perÃ­odos...</p>
    </div>
  
    <div *ngIf="!carregando && resultado" class="insights-content">
      <div class="periodo-info">
        <small>Comparando com perÃ­odo anterior equivalente</small>
      </div>
  
      <!-- Container com scroll condicional -->
      <div class="insights-container" [class.scrollable]="resultado.insights.length > 3">
        <div *ngFor="let insight of resultado.insights" 
             class="insight-item" 
             [class]="'insight-' + insight.tipo">
          
          <div class="insight-header">
            <span class="insight-icon">{{ insight.icone }}</span>
            <strong class="insight-title">{{ insight.titulo }}</strong>
            <span class="insight-priority" [class]="'priority-' + insight.prioridade">
              {{ insight.prioridade }}
            </span>
          </div>
          
          <p class="insight-description">{{ insight.descricao }}</p>
          
          <div *ngIf="insight.variacao !== undefined" class="insight-variacao">
            <span [class]="insight.variacao > 0 ? 'positive' : 'negative'">
              {{ insight.variacao > 0 ? '+' : '' }}{{ insight.variacao.toFixed(1) }}%
            </span>
          </div>
        </div>
      </div>
  
      <!-- Indicador de scroll (aparece apenas quando hÃ¡ muitos insights) -->
      <div *ngIf="resultado.insights.length > 3" class="scroll-indicator">
        <span>â¬‡ï¸ Role para ver mais insights</span>
      </div>
  
      <div *ngIf="!resultado.insights.length" class="no-insights">
        <p>ğŸ“ˆ Aplique filtros para ver anÃ¡lises comparativas</p>
      </div>
    </div>
  
    <div *ngIf="erro" class="error-insights">
      <p>âš ï¸ {{ erro }}</p>
    </div>
  </div>